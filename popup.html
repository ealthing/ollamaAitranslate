<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>快速翻译</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <h2>快速翻译</h2>
    <div class="settings">
      <label for="api-host">服务器地址：</label>
      <input type="text" id="api-host" placeholder="http://localhost:11434">
      
      <label for="model-select">选择翻译模型：</label>
      <select id="model-select">
        <option value="">加载中...</option>
      </select>

      <label for="source-lang">源语言：</label>
      <select id="source-lang">
        <option value="auto">自动检测</option>
        <option value="en">英语</option>
        <option value="zh">中文</option>
        <option value="ja">日语</option>
        <option value="ko">韩语</option>
      </select>

      <label for="target-lang">目标语言：</label>
      <select id="target-lang">
        <option value="zh">中文</option>
        <option value="en">英语</option>
        <option value="ja">日语</option>
        <option value="ko">韩语</option>
      </select>

      <div class="color-settings">
        <label>翻译文本颜色：</label>
        <div class="color-options">
          <input type="color" id="translation-color" value="#1a73e8">
          <button id="reset-color" class="small-button">重置</button>
        </div>
      </div>

      <div class="model-settings">
        <label>模型参数设置：</label>
        <div class="parameter-group">
          <label for="temperature">温度 (Temperature)：
            <span class="parameter-value" id="temperature-value">0.7</span>
          </label>
          <input type="range" id="temperature" min="0" max="2" step="0.1" value="0.7">
          <div class="parameter-description">较高的值会使输出更加随机，较低的值会使输出更加集中和确定</div>
        </div>

        <div class="parameter-group">
          <label for="top-p">Top P：
            <span class="parameter-value" id="top-p-value">0.7</span>
          </label>
          <input type="range" id="top-p" min="0" max="1" step="0.1" value="0.7">
          <div class="parameter-description">控制输出的多样性，较低的值会使输出更加保守</div>
        </div>

        <div class="parameter-group">
          <label for="max-tokens">最大输出长度：
            <span class="parameter-value" id="max-tokens-value">2000</span>
          </label>
          <input type="range" id="max-tokens" min="100" max="4000" step="100" value="2000">
          <div class="parameter-description">控制模型输出的最大标记数</div>
        </div>
      </div>
    </div>

    <div class="shortcuts">
      <h3>快捷键</h3>
      <ul>
        <li>翻译选中文本: <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>T</kbd></li>
      </ul>
    </div>

    <div class="tips">
      <p class="tip">选择文本后立即翻译</p>
      <details>
        <summary>遇到问题？</summary>
        <div class="help-text">
          <p>如果遇到 403 错误，请按照以下步骤设置：</p>
          <p>Windows：</p>
          <ol>
            <li>打开控制面板 -> 系统属性 -> 环境变量</li>
            <li>在用户环境变量中新建：</li>
            <li>OLLAMA_HOST = 0.0.0.0</li>
            <li>OLLAMA_ORIGINS = *</li>
          </ol>
          <p>MacOS：</p>
          <ol>
            <li>打开终端</li>
            <li>执行：launchctl setenv OLLAMA_ORIGINS "*"</li>
          </ol>
          <p>Linux：</p>
          <ol>
            <li>执行：OLLAMA_ORIGINS="*" ollama serve</li>
          </ol>
        </div>
      </details>
    </div>
    <p class="status" id="status"></p>
  </div>
  <script src="popup.js"></script>
</body>
</html> 